<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>api</title>
</head>
<body>
    <h1>ì§€ì—­ë³„ ë‚ ì”¨ ì •ë³´</h1>
    <div id="weather"></div>

    <script>
        const apiKey = '8f7b365bda2da68e3983adf27c328085';
        const citiesEnglish = ['Gunsan', 'Jeonju', 'Mokpo', 'Yeosu', 'Yongin', 'Suwon', 'Pyeongtaek', 'Seongnam', 'Pohang', 'Gyeongju', 'Busan', 'Daegu'];
        const citiesKorean = {
            'Gunsan': 'ê·¼ì‚°',
            'Jeonju': 'ì „ì£¼',
            'Mokpo': 'ëª©í¬',
            'Yeosu': 'ì—¬ìˆ˜',
            'Yongin': 'ìš©ì¸',
            'Suwon': 'ìˆ˜ì›',
            'Pyeongtaek': 'í‰íƒ',
            'Seongnam': 'ì„±ë‚¨',
            'Pohang': 'í¬í•­',
            'Gyeongju': 'ê²½ì£¼',
            'Busan': 'ë¶€ì‚°',
            'Daegu': 'ëŒ€êµ¬'
        };
        const weatherData = {};

        function fetchWeather(city) {
            const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=kr`;
            
            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const weatherMain = data.weather[0].main; 
                    const celestialObject = mapWeatherToCelestial(weatherMain); 
                    weatherData[city] = celestialObject;
                    if (Object.keys(weatherData).length === citiesEnglish.length) {
                        displayWeather();
                    }
                })
                .catch(error => {
                    console.error(`${city} ì§€ì—­ì˜ ë‚ ì”¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.`, error);
                });
        }

        function displayWeather() {
            const weatherContainer = document.getElementById('weather');
            citiesEnglish.forEach(city => {
                const celestialObject = weatherData[city];
                const weatherElement = document.createElement('p');
                weatherElement.textContent = `${citiesKorean[city]}: ${celestialObject}`;
                weatherContainer.appendChild(weatherElement);
            });
        }

        function mapWeatherToCelestial(weatherMain) { 
            switch (weatherMain) {
                case 'Clear':
                    return 'â˜€ï¸';
                case 'Clouds':
                    return 'â˜ï¸';
                case 'Rain':
                case 'Drizzle':
                case 'Squall':
                    return 'ðŸŒ§ï¸';
                case 'Thunderstorm':
                    return 'â›ˆï¸';
                case 'Snow':
                    return 'â„ï¸';
                case 'Mist':
                case 'Haze':
                case 'Smoke':
                case 'Fog':
                    return 'ðŸŒ«ï¸';
                case 'Dust':
                case 'Sand':
                case 'Ash':
                    return 'ðŸŒªï¸';
                default:
                    return 'âŒ';
            }
        }

        citiesEnglish.forEach(city => {
            fetchWeather(city);
        });
    </script>
</body>
</html>
